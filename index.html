<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Par for the Course - Scoring</title>
    <style>
        body {
      font-family: Arial, sans-serif;
      background-color: #000;
      color: #fff;
      text-align: center;
    }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        td {
            border: 1px solid #d11111;
            padding: 8px;
            text-align: center;
        }
        .btn {
            background-color: #d11111;
            color: #fff;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            margin: 2px;
        }
        .btn:hover {
            opacity: 0.8;
        }
        .score-controls-row {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Par for the Course - Classic</h1>
    <div id="splash-screen">
        <img src="images/Splash-Screen.png" alt="Splash Screen">
        <button id="start-game" class="btn">Start</button>
    </div>

    <div id="game-container" style="display: none;">
        <div id="score-controls"></div>
        <table id="box-score"></table>
        <button id="next-hole" class="btn">Next Card</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const totalCards = 18;
            const playerScores = [
                { name: "Player 1", scores: Array(totalCards).fill(0) },
                { name: "Player 2", scores: Array(totalCards).fill(0) }
            ];
            let currentHole = 0;

            const splashScreen = document.getElementById("splash-screen");
            const startGameButton = document.getElementById("start-game");
            const gameContainer = document.getElementById("game-container");

            const scoreControls = document.getElementById("score-controls");
            const boxScoreTable = document.getElementById("box-score");
            const nextHoleButton = document.getElementById("next-hole");

            startGameButton.addEventListener("click", () => {
                splashScreen.style.display = "none";
                gameContainer.style.display = "block";
                renderScoreButtons();
                updateBoxScore();
            });

            const renderScoreButtons = () => {
                scoreControls.innerHTML = "";

                playerScores.forEach((player, index) => {
                    const scoreControlsDiv = document.createElement("div");
                    scoreControlsDiv.classList.add("score-controls-row");

                    const playerName = document.createElement("span");
                    playerName.textContent = player.name;
                    playerName.style.marginRight = "10px";

                    const incrementButton = document.createElement("button");
                    incrementButton.classList.add("btn");
                    incrementButton.textContent = "+1";
                    incrementButton.addEventListener("click", () => adjustScore(index, currentHole, 1));

                    const decrementButton = document.createElement("button");
                    decrementButton.classList.add("btn");
                    decrementButton.textContent = "-1";
                    decrementButton.addEventListener("click", () => adjustScore(index, currentHole, -1));

                    scoreControlsDiv.appendChild(playerName);
                    scoreControlsDiv.appendChild(incrementButton);
                    scoreControlsDiv.appendChild(decrementButton);

                    scoreControls.appendChild(scoreControlsDiv);
                });
            };

            const adjustScore = (playerIndex, holeIndex, adjustment) => {
                if (holeIndex >= 0 && holeIndex < totalCards && playerIndex >= 0 && playerIndex < playerScores.length) {
                    playerScores[playerIndex].scores[holeIndex] += adjustment;

                    console.log(`Adjusting Player ${playerIndex + 1}, Hole ${holeIndex + 1}, by ${adjustment}`);
                    updateBoxScore();
                } else {
                    console.error("Invalid playerIndex or holeIndex:", playerIndex, holeIndex);
                }
            };

            const updateBoxScore = () => {
                boxScoreTable.innerHTML = "";

                const headerRow = document.createElement("tr");
                headerRow.innerHTML = `<td>Player</td>` + 
                    playerScores[0].scores.map((_, i) => `<td>Hole ${i + 1}</td>`).join("") +
                    `<td>Total</td>`;
                boxScoreTable.appendChild(headerRow);

                playerScores.forEach(player => {
                    const totalScore = player.scores.reduce((acc, score) => acc + score, 0);
                    const row = document.createElement("tr");
                    const holeScores = player.scores.map(score => `<td>${score}</td>`).join("");
                    row.innerHTML = `
                        <td>${player.name}</td>
                        ${holeScores}
                        <td>${totalScore}</td>
                    `;
                    boxScoreTable.appendChild(row);
                });
            };

            nextHoleButton.addEventListener("click", () => {
                if (currentHole < totalCards - 1) {
                    currentHole++;
                    renderScoreButtons();
                    updateBoxScore();
                } else {
                    alert("GAME OVER");
                }
            });
        });
    </script>
    <h6>v 0.7.5.5</h6>
</body>
</html>
