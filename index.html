<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Par for the Course - Classic</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000;
            color: #fff;
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        td {
            border: 1px solid #d11111;
            padding: 8px;
            text-align: center;
        }
        .btn {
            background-color: #d11111;
            color: #fff;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            margin: 2px;
        }
        .btn:hover {
            opacity: 0.8;
        }
        .score-controls-row {
            margin-bottom: 10px;
        }

#box-score {
    display: none; /* Hide the box score by default */
    transition: max-height 0.3s ease-out;
}
#box-score.expanded {
    display: table; /* Show the box score when expanded */
}
    </style>
</head>
<body>
    <div id="splash-screen">
        <img src="images/Splash-Screen.png" alt="Splash Screen" width=300px height=auto>
        <button id="setup-game" class="btn">Next</button>
    </div>

    <div id="player-setup" style="display: none;">
        <h2>Player Setup</h2>
        <div id="player-inputs"></div>
        <button id="add-player" class="btn">Add Player</button>
        <button id="start-game" class="btn">Start Game</button>
    </div>

    <div id="gamecontainer" style="display: none;">
        <div id="score-controls"></div>
        <table id="box-score"></table>
        <button id="next-hole" class="btn">Next Card</button>
    </div>

<script>
    // Add Player Setup Area
    const addPlayerSetupArea = () => {
        // Create Player Setup Section
        const playerSetupContainer = document.getElementById("player-setup") || document.createElement("div");
        playerSetupContainer.id = "player-setup";
        if (!document.getElementById("player-setup")) {
            playerSetupContainer.innerHTML = `
                <h3>Player Setup</h3>
                <div id="player-inputs-container"></div>
                <button id="add-player-btn" class="btn">Add Player</button>
                <button id="start-game-btn" class="btn">Start Game</button>
            `;
            gameContainer.insertBefore(playerSetupContainer, boxScoreTable);
        }

        // Handle Add Player Button Click
        const addPlayerBtn = document.getElementById("add-player-btn");
        const playerInputsContainer = document.getElementById("player-inputs-container");

        addPlayerBtn.addEventListener("click", () => {
            const playerInputField = document.createElement("div");
            playerInputField.classList.add("player-input-field");
            playerInputField.innerHTML = `
                <label>Player Name:</label>
                <input type="text" class="player-name-input" placeholder="Player 1">
            `;
            playerInputsContainer.appendChild(playerInputField);
        });

        // Handle Start Game Button Click
        const startGameBtn = document.getElementById("start-game-btn");
        startGameBtn.addEventListener("click", () => {
            const playerNames = Array.from(document.querySelectorAll(".player-name-input"))
                .map(input => input.value.trim())
                .filter(name => name.length > 0);

            if (playerNames.length > 0) {
                // Initialize playerScores based on input names
                playerScores = playerNames.map(name => ({
                    name,
                    scores: Array(playerNames.length).fill(0), // Adjust number of holes here if necessary
                }));

                // Remove the player setup section after starting the game
                playerSetupContainer.remove();

                // Now we can update the box score display
                updateBoxScore();
            } else {
                alert("Please enter at least one player name.");
            }
        });
    };

    // Call the setup function when the page loads
    addPlayerSetupArea();

    // Existing updateBoxScore function...
    const updateBoxScore = () => {
        // Display Total Scores
        const totalScoresContainer = document.getElementById("total-scores") || document.createElement("div");
        totalScoresContainer.id = "total-scores";
        totalScoresContainer.innerHTML = playerScores
            .map(player => {
                const totalScore = player.scores.reduce((acc, score) => acc + score, 0);
                return `<div><strong>${player.name}:</strong> ${totalScore}</div>`;
            })
            .join("");
        gameContainer.insertBefore(totalScoresContainer, boxScoreTable);

        // Update Detailed Box Score Table
        boxScoreTable.innerHTML = "";

        const headerRow = document.createElement("tr");
        headerRow.innerHTML = `<td>Player</td>` + 
            playerScores[0].scores.map((_, i) => `<td>Hole ${i + 1}</td>`).join("") +
            `<td>Total</td>`;
        boxScoreTable.appendChild(headerRow);

        playerScores.forEach(player => {
            const totalScore = player.scores.reduce((acc, score) => acc + score, 0);
            const row = document.createElement("tr");
            const holeScores = player.scores.map(score => `<td>${score}</td>`).join("");
            row.innerHTML = `
                <td>${player.name}</td>
                ${holeScores}
                <td>${totalScore}</td>
            `;
            boxScoreTable.appendChild(row);
        });
    };

    // Add Toggle Button Once
    let toggleBoxScoreButton = document.getElementById("toggle-box-score");
    if (!toggleBoxScoreButton) {
        toggleBoxScoreButton = document.createElement("button");
        toggleBoxScoreButton.id = "toggle-box-score";
        toggleBoxScoreButton.classList.add("btn");
        toggleBoxScoreButton.textContent = "Toggle Box Score";
        gameContainer.insertBefore(toggleBoxScoreButton, boxScoreTable);

        toggleBoxScoreButton.addEventListener("click", () => {
            boxScoreTable.classList.toggle("expanded");
        });
    }
</script>

    <h6>v 0.7.5.10</h6>
</body>
</html>

