<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Par for the Course - Classic</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000;
            color: #fff;
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        td {
            border: 1px solid #d11111;
            padding: 8px;
            text-align: center;
        }
        .btn {
            background-color: #d11111;
            color: #fff;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            margin: 2px;
        }
        .btn:hover {
            opacity: 0.8;
        }
        .score-controls-row {
            margin-bottom: 10px;
        }

#box-score {
    display: none; /* Hide the box score by default */
    transition: max-height 0.3s ease-out;
}
#box-score.expanded {
    display: table; /* Show the box score when expanded */
}
    </style>
</head>
<body>
    <div id="splash-screen">
        <img src="images/Splash-Screen.png" alt="Splash Screen" width=300px height=auto>
        <button id="setup-game" class="btn">Start</button>
    </div>

    <div id="player-setup" style="display: none;">
        <h2>Player Setup</h2>
        <div id="player-inputs"></div>
        <button id="add-player" class="btn">Add Player</button>
        <button id="start-game" class="btn">Start Game</button>
    </div>

    <div id="game-container" style="display: none;">
        <div id="score-controls"></div>
        <table id="box-score"></table>
        <button id="next-hole" class="btn">Next Card</button>
    </div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const totalCards = 18;
        const playerScores = [];
        let currentHole = 0;

        const splashScreen = document.getElementById("splash-screen");
        const setupGameButton = document.getElementById("setup-game");
        const playerSetup = document.getElementById("player-setup");
        const playerInputs = document.getElementById("player-inputs");
        const addPlayerButton = document.getElementById("add-player");
        const startGameButton = document.getElementById("start-game");
        const gameContainer = document.getElementById("game-container");

        const scoreControls = document.getElementById("score-controls");
        const boxScoreTable = document.getElementById("box-score");
        const nextHoleButton = document.getElementById("next-hole");

        // Create a container for the card image
        const cardImageContainer = document.createElement("div");
        cardImageContainer.style.marginBottom = "20px";

        const cardImage = document.createElement("img");
        cardImage.style.width = "100%";
        cardImage.style.maxWidth = "400px";
        cardImage.style.display = "block";
        cardImage.style.margin = "0 auto";

        cardImageContainer.appendChild(cardImage);
        gameContainer.insertBefore(cardImageContainer, nextHoleButton);

        // Generate image paths
        const imagePaths = Array.from({ length: totalCards }, (_, i) => `images/card${i + 1}.png`);

        setupGameButton.addEventListener("click", () => {
            splashScreen.style.display = "none";
            playerSetup.style.display = "block";
            addPlayerInput("Player 1");
            addPlayerInput("Player 2");
        });

        addPlayerButton.addEventListener("click", () => {
            const playerName = `Player ${playerScores.length + 1}`;
            addPlayerInput(playerName);
        });

        const addPlayerInput = (defaultName) => {
            const playerInputDiv = document.createElement("div");
            const playerInput = document.createElement("input");
            playerInput.type = "text";
            playerInput.placeholder = "Enter player name";
            playerInput.value = defaultName;
            playerInputDiv.appendChild(playerInput);
            playerInputs.appendChild(playerInputDiv);
        };

        startGameButton.addEventListener("click", () => {
            const inputFields = [...playerInputs.children].map(div => div.querySelector("input"));
            const validInputs = inputFields.filter(input => input.value.trim() !== "");

            if (validInputs.length === 0) {
                alert("Please enter at least one player name.");
                return;
            }

            playerSetup.style.display = "none";
            gameContainer.style.display = "block";

            playerScores.length = 0;
            validInputs.forEach(input => {
                playerScores.push({ name: input.value.trim(), scores: Array(totalCards).fill(0) });
            });

            displayRandomCard(); // Show a random card at the start
            renderScoreButtons();
            updateBoxScore();
        });

        const renderScoreButtons = () => {
            scoreControls.innerHTML = "";

            playerScores.forEach((player, index) => {
                const scoreControlsDiv = document.createElement("div");
                scoreControlsDiv.classList.add("score-controls-row");

                const playerName = document.createElement("span");
                playerName.textContent = player.name;
                playerName.style.marginRight = "10px";

                const incrementButton = document.createElement("button");
                incrementButton.classList.add("btn");
                incrementButton.textContent = "+1";
                incrementButton.addEventListener("click", () => adjustScore(index, currentHole, 1));

                const decrementButton = document.createElement("button");
                decrementButton.classList.add("btn");
                decrementButton.textContent = "-1";
                decrementButton.addEventListener("click", () => adjustScore(index, currentHole, -1));

                scoreControlsDiv.appendChild(playerName);
                scoreControlsDiv.appendChild(incrementButton);
                scoreControlsDiv.appendChild(decrementButton);

                scoreControls.appendChild(scoreControlsDiv);
            });
        };

        const adjustScore = (playerIndex, holeIndex, adjustment) => {
            if (holeIndex >= 0 && holeIndex < totalCards && playerIndex >= 0 && playerIndex < playerScores.length) {
                playerScores[playerIndex].scores[holeIndex] += adjustment;
                updateBoxScore();
            }
        };

const updateBoxScore = () => {
    // Display Total Scores Only
    scoreControls.innerHTML = playerScores
        .map(player => {
            const totalScore = player.scores.reduce((acc, score) => acc + score, 0);
            return `<div><strong>${player.name}:</strong> ${totalScore}</div>`;
        })
        .join("");

    // Update Detailed Box Score Table
    boxScoreTable.innerHTML = "";

    const headerRow = document.createElement("tr");
    headerRow.innerHTML = `<td>Player</td>` + 
        playerScores[0].scores.map((_, i) => `<td>Hole ${i + 1}</td>`).join("") +
        `<td>Total</td>`;
    boxScoreTable.appendChild(headerRow);

    playerScores.forEach(player => {
        const totalScore = player.scores.reduce((acc, score) => acc + score, 0);
        const row = document.createElement("tr");
        const holeScores = player.scores.map(score => `<td>${score}</td>`).join("");
        row.innerHTML = `
            <td>${player.name}</td>
            ${holeScores}
            <td>${totalScore}</td>
        `;
        boxScoreTable.appendChild(row);
    });
};

// Add Toggle Button
const toggleBoxScoreButton = document.createElement("button");
toggleBoxScoreButton.classList.add("btn");
toggleBoxScoreButton.textContent = "Toggle Box Score";
gameContainer.insertBefore(toggleBoxScoreButton, boxScoreTable);

toggleBoxScoreButton.addEventListener("click", () => {
    boxScoreTable.classList.toggle("expanded");
});

        const displayRandomCard = () => {
            const randomIndex = Math.floor(Math.random() * totalCards);
            cardImage.src = imagePaths[randomIndex];
        };

        nextHoleButton.addEventListener("click", () => {
            if (currentHole < totalCards - 1) {
                currentHole++;
                displayRandomCard();
                renderScoreButtons();
                updateBoxScore();
            } else {
                alert("GAME OVER");
            }
        });
    });
</script>
    <h6>v 0.7.5.9</h6>
</body>
</html>

