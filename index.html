<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Par for the Course - Scoring App</title>
  <style>
    /* Reset and base styles */
    body, html {
      margin: 0; padding: 0; height: 100%;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #121212;
      color: #eee;
      overflow-x: hidden;
    }

    /* Splash Screen styles */
    #splash-screen {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #d11111;
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      user-select: none;
      font-weight: bold;
      font-size: 2.5rem;
      text-align: center;
      padding: 20px;
    }
    #splash-screen button {
      margin-top: 30px;
      font-size: 1.2rem;
      padding: 12px 28px;
      border: none;
      border-radius: 12px;
      background-color: #fff;
      color: #d11111;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 4px 8px rgba(255,255,255,0.7);
      transition: background-color 0.3s ease;
      user-select: none;
    }
    #splash-screen button:hover {
      background-color: #f0f0f0;
    }

    /* Main container styles */
    #main-container {
      display: none; /* hidden initially until splash dismissed */
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: 100px; /* for bottom fixed bar */
      user-select: none;
    }

    h1 {
      margin: 20px 0 10px 0;
      color: #d11111;
      font-weight: bold;
      font-size: 2rem;
      user-select: none;
    }

    /* Player swipe container */
    #player-swipe-container {
      margin: 20px auto;
      max-width: 360px;
      background: #1c1c1c;
      border-radius: 12px;
      padding: 20px;
      touch-action: pan-y;
      box-shadow: 0 0 10px rgba(209, 17, 17, 0.6);
      user-select: none;
    }

    #active-player-banner {
      font-size: 1.8rem;
      font-weight: bold;
      margin-bottom: 25px;
      color: #d11111;
      text-align: center;
    }

    #increment-buttons {
      display: flex;
      justify-content: space-around;
      align-items: center;
      gap: 15px;
    }

    .big-btn {
      font-size: 3.5rem;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      border: none;
      background-color: #d11111;
      color: white;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 4px 8px rgba(209, 17, 17, 0.8);
      transition: background-color 0.15s ease;
    }
    .big-btn:active {
      background-color: #a50e0e;
    }

    .medium-btn {
      font-size: 1.3rem;
      padding: 12px 24px;
      border-radius: 10px;
      background-color: #d11111;
      color: white;
      border: none;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 4px 8px rgba(209, 17, 17, 0.7);
      transition: background-color 0.15s ease;
      flex-shrink: 0;
      white-space: nowrap;
    }
    .medium-btn:active {
      background-color: #a50e0e;
    }

    #swipe-hint {
      margin-top: 12px;
      font-size: 0.85rem;
      color: #888;
      text-align: center;
      font-style: italic;
      user-select: none;
    }

    /* Bottom fixed button banner */
    #bottom-fixed-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: #1a1a1a;
      border-top: 2px solid #d11111;
      display: flex;
      justify-content: space-around;
      align-items: center;
      height: 70px;
      padding: 0 10px;
      z-index: 9999;
      box-shadow: 0 -3px 10px rgba(209, 17, 17, 0.8);
      user-select: none;
    }

    #bottom-fixed-bar button {
      background-color: #d11111;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 18px;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: 0 3px 6px rgba(209, 17, 17, 0.8);
      transition: background-color 0.2s ease;
      flex-grow: 1;
      margin: 0 5px;
      max-width: 150px;
      user-select: none;
      white-space: nowrap;
    }
    #bottom-fixed-bar button:active {
      background-color: #a50e0e;
    }

    /* Responsive */
    @media (max-width: 400px) {
      #player-swipe-container {
        width: 90vw;
        padding: 15px;
      }
      .big-btn {
        width: 70px;
        height: 70px;
        font-size: 2.8rem;
      }
      .medium-btn {
        font-size: 1rem;
        padding: 8px 16px;
      }
      #bottom-fixed-bar {
        height: 60px;
      }
      #bottom-fixed-bar button {
        font-size: 1rem;
        max-width: 120px;
        padding: 8px 12px;
        margin: 0 3px;
      }
    }
  </style>
</head>
<body>
  <!-- Splash Screen -->
  <div id="splash-screen" role="dialog" aria-modal="true" aria-labelledby="splash-title" tabindex="-1">
    <div id="splash-title">Welcome to Par for the Course!</div>
    <button id="start-btn" aria-label="Start scoring">Start Scoring</button>
  </div>

  <!-- Main Scoring UI -->
  <div id="main-container" role="main" aria-live="polite">
    <h1>Par for the Course</h1>

    <div id="player-swipe-container" aria-label="Player score controls" tabindex="0">
      <div id="active-player-banner" aria-live="polite">Loading...</div>
      <div id="increment-buttons">
        <button id="decrement-score" class="big-btn" aria-label="Decrease score">–</button>
        <button id="scratch-score" class="medium-btn" aria-label="Scratch adds 2">Scratch</button>
        <button id="increment-score" class="big-btn" aria-label="Increase score">+</button>
      </div>
      <div id="swipe-hint">Swipe left/right to change player</div>
    </div>
  </div>

  <!-- Bottom fixed button bar -->
  <div id="bottom-fixed-bar">
    <button id="reset-scores-btn" aria-label="Reset Scores">Reset Scores</button>
    <button id="download-scores-btn" aria-label="Download Scores">Download Scores</button>
    <button id="buy-game-btn" aria-label="Buy the game">Buy the Game</button>
  </div>

  <script>
    // === Splash screen logic ===
    const splashScreen = document.getElementById("splash-screen");
    const startBtn = document.getElementById("start-btn");
    const mainContainer = document.getElementById("main-container");

    startBtn.addEventListener("click", () => {
      splashScreen.style.display = "none";
      mainContainer.style.display = "flex";
      updateActivePlayerDisplay();
      // Focus the main swipe container for accessibility
      document.getElementById("player-swipe-container").focus();
    });

    // === Data setup ===
    const playerScores = [
      { name: "Alice", scores: Array(18).fill(0), totalScore: 0 },
      { name: "Bob", scores: Array(18).fill(0), totalScore: 0 },
      { name: "Charlie", scores: Array(18).fill(0), totalScore: 0 }
    ];
    let currentCardIndex = 0; // Assuming scoring for the current hole/card

    let activePlayerIndex = 0;

    // === DOM Elements ===
    const banner = document.getElementById("active-player-banner");
    const incrementBtn = document.getElementById("increment-score");
    const decrementBtn = document.getElementById("decrement-score");
    const scratchBtn = document.getElementById("scratch-score");

    // Bottom buttons
    const resetBtn = document.getElementById("reset-scores-btn");
    const downloadBtn = document.getElementById("download-scores-btn");
    const buyGameBtn = document.getElementById("buy-game-btn");

    // Swipe container
    const swipeContainer = document.getElementById("player-swipe-container");
    let touchStartX = 0;

    // === Functions ===

    function updateActivePlayerDisplay() {
      const player = playerScores[activePlayerIndex];
      banner.textContent = `${player.name} — Score: ${player.totalScore}`;
    }

    function updateTotalScoreForPlayer(player) {
      player.totalScore = player.scores.reduce((a, b) => a + b, 0);
    }

    function adjustScore(adjustment) {
      const player = playerScores[activePlayerIndex];
      player.scores[currentCardIndex] += adjustment;
      if (player.scores[currentCardIndex] < 0) player.scores[currentCardIndex] = 0;
      updateTotalScoreForPlayer(player);
      updateActivePlayerDisplay();
    }

    function resetScores() {
      playerScores.forEach(player => {
        for(let i = 0; i < player.scores.length; i++) {
          player.scores[i] = 0;
        }
        updateTotalScoreForPlayer(player);
      });
      updateActivePlayerDisplay();
      alert("Scores have been reset.");
    }

    function downloadScores() {
      // Prepare CSV data
      let csvContent = "data:text/csv;charset=utf-8,";
      // Header row
      csvContent += "Player," + playerScores[0].scores.map((_,i) => `Hole ${i+1}`).join(",") + ",Total\n";
      playerScores.forEach(player => {
        csvContent += player.name + "," + player.scores.join(",") + "," + player.totalScore + "\n";
      });

      // Create download link
      const encodedUri = encodeURI(csvContent);
      const link = document.createElement("a");
      link.setAttribute("href", encodedUri);
      const timestamp = new Date().toISOString().replace(/[:.-]/g, "");
      link.setAttribute("download", `par_for_the_course_scores_${timestamp}.csv`);
      document.body.appendChild(link); // Required for Firefox
      link.click();
      document.body.removeChild(link);
    }

    function buyGame() {
      // Replace this URL with your actual purchase/store page
      const storeUrl = "https://www.thegamecrafter.com/designers/promethean-games";
      window.open(storeUrl, "_blank");
    }

    // === Event Listeners ===

    incrementBtn.addEventListener("click", () => adjustScore(1));
    decrementBtn.addEventListener("click", () => adjustScore(-1));
    scratchBtn.addEventListener("click", () => adjustScore(2));

    resetBtn.addEventListener("click", resetScores);
    downloadBtn.addEventListener("click", downloadScores);
    buyGameBtn.addEventListener("click", buyGame);

    // Swipe detection for mobile touch
    swipeContainer.addEventListener("touchstart", (e) => {
      touchStartX = e.changedTouches[0].screenX;
    });

    swipeContainer.addEventListener("touchend", (e) => {
      const touchEndX = e.changedTouches[0].screenX;
      const deltaX = touchEndX - touchStartX;
      if (Math.abs(deltaX) > 50) { // swipe threshold
        if (deltaX > 0) {
          // Swipe right: previous player
          activePlayerIndex = (activePlayerIndex - 1 + playerScores.length) % playerScores.length;
        } else {
          // Swipe left: next player
          activePlayerIndex = (activePlayerIndex + 1) % playerScores.length;
        }
        updateActivePlayerDisplay();
      }
    });

    // Keyboard navigation for desktop (left/right arrows)
    document.addEventListener("keydown", (e) => {
      if (mainContainer.style.display === "flex") {
        if (e.key === "ArrowLeft") {
          activePlayerIndex = (activePlayerIndex - 1 + playerScores.length) % playerScores.length;
          updateActivePlayerDisplay();
        }
        if (e.key === "ArrowRight") {
          activePlayerIndex = (activePlayerIndex + 1) % playerScores.length;
          updateActivePlayerDisplay();
        }
      }
    });

  </script>
</body>
</html>




